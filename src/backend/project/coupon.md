---
title: 优惠券模块设计
date: 2024-12-01
author: JackSu
categories: 
 - 后端
tags: 
 - 模块设计
---
# 一、整体概览


  
![平台功能图](./images/功能模块.png)
✅一、整体架构层级概览

从上到下分为 5 层：

1.业务层（顶层） — 上游业务方（外部系统）

2.场景层 — 商家端、消费者端展示/触达场景

3.产品功能层 — 核心优惠券能力（建券、领券、核销、风控…）

4.领域模型层 — 优惠券核心领域对象（模板、类型、渠道…）

5.依赖层 — 基础资源（商品、用户、风控…）

此外还有两个侧翼系统：

1.平台运营后台

2.数仓 & BI（报表与分析）

✅二、场景层（核心触达）
分两大端：
1）商家中心
商家在后台完成：
1.建券：创建优惠券模板
2.结束券：暂停、冻结、解冻、终止某类券
3.营销透出：活动/商详页展示券包
4.商户透出：给特定商家发券
➡️ 本质：券的生产方 + 配置方

2）消费者端（用户使用）
包括：
1.搜索页透出券
2.商品列表透出券
3.商品详情页券
4.购物车券
5.下单页用券
6.我的优惠券（领券中心）
7.退券退货
➡️ 本质：券的消费方 + 使用场景

三、产品功能层（核心功能）
这是整个系统的 能力中台，所有的建券、审券、发券、核销都属于这一层。
1）建券与审核
1.建券
2.券审核
3.定向绑券（如会员专享）
4.批量发券
2）券模板管理
1.模板冻结/解冻
2.模板限领
3.模板透出（场景展示）

3）领券/用券
1.用户领券
2.下单选券
3.优惠计算
4.退券退货
5.核销 & 验单

4）过滤器（非常关键）
1.业务规则过滤：
2.标注过滤（判断商品标签是否符合）
3.风控过滤（异常用户、羊毛党）
4.模板过滤（有效期、库存、规则）

5）查询与运营
1.查看优惠券
2.券搜 & 券单
3.券后价（计算最终价格）
➡️ 产品功能层 = 所有业务 API 能力的聚合点


![业务架构图](./images/发券用券流程.png)

![优惠券表设计](./images/优惠券表设计.png)

![各个系统交互图](./images/各个系统交互图.png)

![各个系统交互图](./images/领券流程.png.png)





